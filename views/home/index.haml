- @title = "Homepage"
- @body_class = "home"

#banner


/ Begin MailChimp Signup Form
/[if IE]
  <style type="text/css" media="screen">
  \#mc_embed_signup fieldset {position: relative;}
  \#mc_embed_signup legend {position: absolute; top: -1em; left: .2em;}
  </style>
/[if IE 7]
  <style type="text/css" media="screen">
  \.mc-field-group {overflow:visible;}
  </style>
#mc_embed_signup{:style => "width: 250px;"}
  %form#mc-embedded-subscribe-form.validate{:action => "http://swiftsessions.us2.list-manage.com/subscribe/post?u=bebfcf36cf54fe51006c228ad&amp;id=07d83727cb", :method => "post", :name => "mc-embedded-subscribe-form", :style => "font: normal 100% Arial, sans-serif;font-size: 10px;", :target => "_blank"}
  
    %fieldset{:style => "-moz-border-radius: 4px;border-radius: 4px;-webkit-border-radius: 4px; border: 1px solid #ccc; padding-top: 2px; margin: 3px 0; background-color: #000; color: #eee; text-align: left;"}
    
      %legend{:style => "white-space: normal;text-transform: capitalize;font-weight: bold;color: #eee; background: #bf1e2e; padding: .3em 1em;border: 1px solid #ccc;-moz-border-radius: 4px; border-radius: 4px;-webkit-border-radius: 4px;font-size: 1.2em;"}
      
        %span join our mailing list

      .mc-field-group{:style => "margin: 1.3em 5%;clear: both;overflow: hidden;"}
      
        %label{:for => "mce-EMAIL", :style => "display: block;margin: .3em 0;line-height: .5em;font-weight: bold;"}
          Email Address
          %strong.note-required *
          
        %input#mce-EMAIL.required.email{:name => "EMAIL", :style => "margin-right: 1.5em;padding: .2em .3em;width: 90%;float: left;z-index: 999;", :type => "text", :value => ""}/
      #mce-responses{:style => "float: left;top: -1.4em;padding: 0em .5em 0em .5em;overflow: hidden;width: 90%;margin: 0 5%;clear: both;"}
        #mce-error-response.response{:style => "display: none;margin: 1em 0;padding: 1em .5em .5em 0;font-weight: bold;float: left;top: -1.5em;z-index: 1;width: 80%;background: FBE3E4;color: #D12F19;"}
        
        #mce-success-response.response{:style => "display: none;margin: 1em 0;padding: 1em .5em .5em 0;font-weight: bold;float: left;top: -1.5em;z-index: 1;width: 80%;background: #E3FBE4;color: #529214;"}
      %div
        %input#mc-embedded-subscribe.btn{:name => "subscribe", :style => "clear: both;width: auto;display: block;margin: 1em 0 1em 5%;", :type => "submit", :value => "Subscribe"}/
    %a#mc_embed_close.mc_embed_close{:href => "#", :style => "display: none;"} Close
:javascript
  var fnames = new Array();var ftypes = new Array();fnames[0]='EMAIL';ftypes[0]='email';
  try {
      var jqueryLoaded=jQuery;
      jqueryLoaded=true;
  } catch(err) {
      var jqueryLoaded=false;
  }
  var head= document.getElementsByTagName('head')[0];
  if (!jqueryLoaded) {
      var script = document.createElement('script');
      script.type = 'text/javascript';
      script.src = 'http://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js';
      head.appendChild(script);
      if (script.readyState && script.onload!==null){
          script.onreadystatechange= function () {
                if (this.readyState == 'complete') mce_preload_check();
          }    
      }
  }
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src = 'http://downloads.mailchimp.com/js/jquery.form-n-validate.js';
  head.appendChild(script);
  var err_style = '';
  try{
      err_style = mc_custom_error_style;
  } catch(e){
      err_style = 'margin: 1em 0 0 0; padding: 1em 0.5em 0.5em 0.5em; background: FFEEEE none repeat scroll 0% 0%; font-weight: bold; float: left; z-index: 1; width: 80%; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial; color: FF0000;';
  }
  var head= document.getElementsByTagName('head')[0];
  var style= document.createElement('style');
  style.type= 'text/css';
  if (style.styleSheet) {
    style.styleSheet.cssText = '.mce_inline_error {' + err_style + '}';
  } else {
    style.appendChild(document.createTextNode('.mce_inline_error {' + err_style + '}'));
  }
  head.appendChild(style);
  setTimeout('mce_preload_check();', 250);
  
  var mce_preload_checks = 0;
  function mce_preload_check(){
      if (mce_preload_checks>40) return;
      mce_preload_checks++;
      try {
          var jqueryLoaded=jQuery;
      } catch(err) {
          setTimeout('mce_preload_check();', 250);
          return;
      }
      try {
          var validatorLoaded=jQuery("#fake-form").validate({});
      } catch(err) {
          setTimeout('mce_preload_check();', 250);
          return;
      }
      mce_init_form();
  }
  function mce_init_form(){
      jQuery(document).ready( function($) {
        var options = { errorClass: 'mce_inline_error', errorElement: 'div', onkeyup: function(){}, onfocusout:function(){}, onblur:function(){}  };
        var mce_validator = $("#mc-embedded-subscribe-form").validate(options);
        $("#mc-embedded-subscribe-form").unbind('submit');//remove the validator so we can get into beforeSubmit on the ajaxform, which then calls the validator
        options = { url: 'http://swiftsessions.us2.list-manage.com/subscribe/post-json?u=bebfcf36cf54fe51006c228ad&id=07d83727cb&c=?', type: 'GET', dataType: 'json', contentType: "application/json; charset=utf-8",
                      beforeSubmit: function(){
                          $('#mce_tmp_error_msg').remove();
                          $('.datefield','#mc_embed_signup').each(
                              function(){
                                  var txt = 'filled';
                                  var fields = new Array();
                                  var i = 0;
                                  $(':text', this).each(
                                      function(){
                                          fields[i] = this;
                                          i++;
                                      });
                                  $(':hidden', this).each(
                                      function(){
                                          if (fields.length == 2) fields[2] = {'value':1970};//trick birthdays into having years
                                      	if ( fields[0].value=='MM' && fields[1].value=='DD' && fields[2].value=='YYYY' ){
                                      		this.value = '';
  									    } else if ( fields[0].value=='' && fields[1].value=='' && fields[2].value=='' ){
                                      		this.value = '';
  									    } else {
  	                                        this.value = fields[0].value+'/'+fields[1].value+'/'+fields[2].value;
  	                                    }
                                      });
                              });
                          return mce_validator.form();
                      }, 
                      success: mce_success_cb
                  };
        $('#mc-embedded-subscribe-form').ajaxForm(options);      
        
      });
  }
  function mce_success_cb(resp){
      $('#mce-success-response').hide();
      $('#mce-error-response').hide();
      if (resp.result=="success"){
          $('#mce-'+resp.result+'-response').show();
          $('#mce-'+resp.result+'-response').html(resp.msg);
          $('#mc-embedded-subscribe-form').each(function(){
              this.reset();
      	});
      } else {
          var index = -1;
          var msg;
          try {
              var parts = resp.msg.split(' - ',2);
              if (parts[1]==undefined){
                  msg = resp.msg;
              } else {
                  i = parseInt(parts[0]);
                  if (i.toString() == parts[0]){
                      index = parts[0];
                      msg = parts[1];
                  } else {
                      index = -1;
                      msg = resp.msg;
                  }
              }
          } catch(e){
              index = -1;
              msg = resp.msg;
          }
          try{
              if (index== -1){
                  $('#mce-'+resp.result+'-response').show();
                  $('#mce-'+resp.result+'-response').html(msg);            
              } else {
                  err_id = 'mce_tmp_error_msg';
                  html = '<div id="'+err_id+'" style="'+err_style+'"> '+msg+'</div>';
                  
                  var input_id = '#mc_embed_signup';
                  var f = $(input_id);
                  if (ftypes[index]=='address'){
                      input_id = '#mce-'+fnames[index]+'-addr1';
                      f = $(input_id).parent().parent().get(0);
                  } else if (ftypes[index]=='date'){
                      input_id = '#mce-'+fnames[index]+'-month';
                      f = $(input_id).parent().parent().get(0);
                  } else {
                      input_id = '#mce-'+fnames[index];
                      f = $().parent(input_id).get(0);
                  }
                  if (f){
                      $(f).append(html);
                      $(input_id).focus();
                  } else {
                      $('#mce-'+resp.result+'-response').show();
                      $('#mce-'+resp.result+'-response').html(msg);
                  }
              }
          } catch(e){
              $('#mce-'+resp.result+'-response').show();
              $('#mce-'+resp.result+'-response').html(msg);
          }
      }
  }
  
/ End mc_embed_signup

- content_for :page_javascript do
  :javascript
    $(document).ready(function() {

      $.ezBgResize({
        img     : "/images/backgrounds/home.jpg",
        width   : 1600,
        height  : 1050,
        opacity : 1,
        center  : true
      });

    });
    
    $(document).ready(function(){
    	$("#banner").ready(function(){
    		$("#banner").animate({width:'784px'}, 1000);				   
    	});			   
    });